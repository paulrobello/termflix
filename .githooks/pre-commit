#!/bin/bash
set -e

echo "ğŸ” Running pre-commit checks..."

# Format check (don't auto-format, just check)
echo "  Checking formatting..."
cargo fmt -- --check || {
    echo "âŒ Code not formatted. Run 'cargo fmt' first."
    exit 1
}

# Clippy
echo "  Running clippy..."
cargo clippy -- -D warnings || {
    echo "âŒ Clippy found warnings."
    exit 1
}

# Type check
echo "  Type checking..."
cargo check || {
    echo "âŒ Type check failed."
    exit 1
}

# Tests
echo "  Running tests..."
cargo test --quiet || {
    echo "âŒ Tests failed."
    exit 1
}

# Build
echo "  Building..."
cargo build --quiet || {
    echo "âŒ Build failed."
    exit 1
}

echo "âœ… All checks passed!"
